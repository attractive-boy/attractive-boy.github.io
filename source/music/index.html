<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="/dist/APlayer.min.css">
    <title>Èü≥‰πêüéµ</title>
</head>

<body>
    <style>
        #search {
            position: absolute;
            width: 98%;
            height: 50px;
            top: 5px;
        }
    </style>

    <div id="aplayer"></div>

    <input id="search" type="text" onkeydown="onKeyDown(event)" placeholder="ÊåâEnterÈîÆÊêúÁ¥¢" />


    <script type="text/javascript" src="/dist/APlayer.min.js"></script>

    <script type="text/javascript">
        async function onKeyDown(event) {
            var e = event || window.event || arguments.callee.caller.arguments[0];
            if (e && e.keyCode == 13) { // enter ÈîÆ
                var searchValue = window.document.getElementById("search").value;
                var audioRes = await axios.get(
                    'https://netease-cloud-music-api-i0on4wcqj-attractive-boy.vercel.app/search?keywords=' +
                    searchValue);
                    var audios = [];
                    for (var i = 0; i < 30; i++) {
                        var song = new Object();
                        song['name']=audioRes.data.result.songs[i].name;
                        song['url']="https://music.163.com/song/media/outer/url?id=" + audioRes.data.result.songs[i].id + ".mp3";
                        song['artist'] = ' ';
                        audios.push(song);
                    }
                    while(audioRes.status != 200);
                    new APlayer({
                        container: document.getElementById('aplayer'), //Êí≠ÊîæÂô®ÂÆπÂô®ÂÖÉÁ¥†
                        mini: false, //Ëø∑‰Ω†Ê®°Âºè
                        autoplay: false, //Ëá™Âä®Êí≠Êîæ
                        theme: '#FADFA3', //‰∏ªÈ¢òËâ≤
                        loop: 'all', //Èü≥È¢ëÂæ™ÁéØÊí≠Êîæ, ÂèØÈÄâÂÄº: 'all'ÂÖ®ÈÉ®Âæ™ÁéØ, 'one'ÂçïÊõ≤Âæ™ÁéØ, 'none'‰∏çÂæ™ÁéØ
                        order: 'random', //Èü≥È¢ëÂæ™ÁéØÈ°∫Â∫è, ÂèØÈÄâÂÄº: 'list'ÂàóË°®Âæ™ÁéØ, 'random'ÈöèÊú∫Âæ™ÁéØ
                        preload: 'auto', //È¢ÑÂä†ËΩΩÔºåÂèØÈÄâÂÄº: 'none', 'metadata', 'auto'
                        volume: 0.7, //ÈªòËÆ§Èü≥ÈáèÔºåËØ∑Ê≥®ÊÑèÊí≠ÊîæÂô®‰ºöËÆ∞ÂøÜÁî®Êà∑ËÆæÁΩÆÔºåÁî®Êà∑ÊâãÂä®ËÆæÁΩÆÈü≥ÈáèÂêéÈªòËÆ§Èü≥ÈáèÂç≥Â§±Êïà
                        mutex: true, //‰∫íÊñ•ÔºåÈòªÊ≠¢Â§ö‰∏™Êí≠ÊîæÂô®ÂêåÊó∂Êí≠ÊîæÔºåÂΩìÂâçÊí≠ÊîæÂô®Êí≠ÊîæÊó∂ÊöÇÂÅúÂÖ∂‰ªñÊí≠ÊîæÂô®
                        listFolded: false, //ÂàóË°®ÈªòËÆ§ÊäòÂè†
                        listMaxHeight: 90, //ÂàóË°®ÊúÄÂ§ßÈ´òÂ∫¶
                        lrcType: 3, //Ê≠åËØç‰º†ÈÄíÊñπÂºè
                        audio : audios,
                    });
            }
        }
    </script>

</body>

</html>